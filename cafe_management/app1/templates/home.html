{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="{% static 'styles/home_page.css' %}">
</head>
<body >
    {% include 'navbar.html' %}
    <div class="form-container">
        <h1 class="heading">Welcome to our website</h1>
        {% if error_message %}
            <p class="error-message">{{ error_message }}</p>
        {% endif %}
        {% if is_authenticated %}
            <a href="{% url 'logout' %}" class="logout-button">Logout</a>
            <a href="{% url 'checkout' %}">Checkout</a>
            {% comment %} <a href="{% url 'order_list' %}" class="order-history-button">Order History</a> {% endcomment %}
            <a href="{% url 'view_cart' %}" class="new-order-button">View My Cart</a>
            <h2 class="menu-items-heading">Menu Items:</h2>
            <ul class="menu-items-list">
                {% for menu_item in menu_items %}
                    <li class="menu-item">{{ menu_item.menu_item_name }}</li>
                    <p class="menu-item-info">Category: {{ menu_item.category }}</p>
                    <p class="menu-item-info">Description: {{ menu_item.description }}</p>
                    <p class="menu-item-info">Price: {{ menu_item.price }}</p>
                    <p class="menu-item-info"> <img src="{{ menu_item.menu_item_image }}" alt="Menu Item Image"></p>
                     <form action="{% url 'add_to_cart' menu_item.id %}" method="POST">
                        {% csrf_token %}
                        <input type="submit" value="Add to Cart" class="add-to-cart-button">
                    </form> 
                {% endfor %}
            </ul>
        {% else %}
            <a href="{% url 'login' %}" class="login-button">Login</a>
            <a href="{% url 'signup' %}" class="signup-button">Signup</a>
        {% endif %}
    </div>
</body>
<script>
    function updateQuantity(itemId, action) {
        fetch('{% url "update_quantity" %}', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: JSON.stringify({
                item_id: itemId,
                action: action
            })
        })
        .then(response => {
            if (response.ok) {
                // Update the quantity on the frontend if the request is successful
                // You can handle this based on your specific UI requirements
            } else {
                console.error('Failed to update quantity');
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }
</script>    
</html>
